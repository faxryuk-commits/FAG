# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apify –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

## üìã –û–±–∑–æ—Ä

Apify - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–∫—Ç–µ—Ä–æ–≤ (actors) –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Apify

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [apify.com](https://apify.com)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Integrations ‚Üí API tokens
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç

–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–∞–π–ª `.env`:

```env
APIFY_API_TOKEN=your_token_here
```

## üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–µ—Ä–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –∞–∫—Ç–µ—Ä–æ–≤

Apify Store —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–µ –∞–∫—Ç–µ—Ä—ã –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–∞–π—Ç–æ–≤:

#### –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã
- –ü–æ–∏—Å–∫: `yandex maps` –≤ Apify Store
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∞–∫—Ç–µ—Ä—ã:
  - `apify/yandex-maps-scraper`
  - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ `apify/cheerio-crawler`

#### Google Maps
- –ü–æ–∏—Å–∫: `google maps` –≤ Apify Store
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∞–∫—Ç–µ—Ä—ã:
  - `apify/google-maps-scraper`
  - `lukaskostal/google-maps-scraper`

#### 2–ì–ò–°
- –ü–æ–∏—Å–∫: `2gis` –≤ Apify Store
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–∫—Ç–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–∫—Ç–µ—Ä–æ–≤

#### –ü—Ä–∏–º–µ—Ä –∞–∫—Ç–µ—Ä–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç

```javascript
// actor/main.js
import { CheerioCrawler } from 'crawlee';
import { Dataset } from 'apify';

const crawler = new CheerioCrawler({
    async requestHandler({ request, $, json }) {
        const { url, userData } = request;
        
        // –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
        const restaurant = {
            name: $('h1').text().trim(),
            address: $('[data-field="address"]').text().trim(),
            phone: $('[data-field="phone"]').text().trim(),
            rating: parseFloat($('.rating-value').text()),
            // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
        };
        
        await Dataset.pushData(restaurant);
    },
});

await crawler.run([
    {
        url: 'https://yandex.ru/maps/org/...',
        userData: { label: 'RESTAURANT' },
    },
]);
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ID –∞–∫—Ç–µ—Ä–æ–≤

–í —Ñ–∞–π–ª–µ `lib/apify/sync.ts` –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `getDefaultActorId`:

```typescript
function getDefaultActorId(source: SyncSource): string {
  const actorIds = {
    yandex: 'your-yandex-actor-id', // ID –≤–∞—à–µ–≥–æ –∞–∫—Ç–µ—Ä–∞
    google: 'your-google-actor-id',
    '2gis': 'your-2gis-actor-id',
  };
  return actorIds[source];
}
```

### –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```typescript
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const result = await startSync({
  source: 'yandex',
  city: '–ú–æ—Å–∫–≤–∞',
  input: {
    searchQuery: '—Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã',
    maxResults: 100,
  },
});
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç

```json
{
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞",
  "address": "–ê–¥—Ä–µ—Å",
  "coordinates": {
    "lat": 55.7558,
    "lon": 37.6173
  },
  "phone": "+7 (495) 123-45-67",
  "rating": 4.5,
  "reviewsCount": 123,
  "workingHours": [
    {
      "day": "monday",
      "open": "09:00",
      "close": "22:00"
    }
  ],
  "reviews": [
    {
      "author": "–ò–º—è",
      "rating": 5,
      "text": "–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω!",
      "date": "2024-01-15"
    }
  ]
}
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Google Maps

```json
{
  "name": "Restaurant Name",
  "formatted_address": "Address",
  "geometry": {
    "location": {
      "lat": 55.7558,
      "lng": 37.6173
    }
  },
  "formatted_phone_number": "+7 495 123-45-67",
  "rating": 4.5,
  "user_ratings_total": 123,
  "opening_hours": {
    "weekday_text": [
      "Monday: 9:00 AM ‚Äì 10:00 PM",
      "Tuesday: 9:00 AM ‚Äì 10:00 PM"
    ]
  },
  "reviews": [
    {
      "author_name": "Name",
      "rating": 5,
      "text": "Great restaurant!",
      "time": 1705276800
    }
  ]
}
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–µ—Ä–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Apify CLI:
```bash
npm install -g apify-cli
```

2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–∫—Ç–µ—Ä:
```bash
apify create my-actor
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
cd my-actor
apify run
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞–∫–µ

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–∫—Ç–µ—Ä –≤ Apify:
```bash
apify push
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ API

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

- **Robots.txt** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–∞–π—Ç–æ–≤
- **Rate limiting** - –Ω–µ –¥–µ–ª–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Terms of Service** - —Å–æ–±–ª—é–¥–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –Ω–µ —Å–æ–±–∏—Ä–∞–π—Ç–µ –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∑–∞–¥–µ—Ä–∂–∫–∏** –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–ö—ç—à–∏—Ä—É–π—Ç–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** gracefully
- **–õ–æ–≥–∏—Ä—É–π—Ç–µ** –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ **—É—Å–ø–µ—à–Ω–æ—Å—Ç—å** –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ **–∫–≤–æ—Ç—ã** Apify
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ **–∫–∞—á–µ—Å—Ç–≤–æ** –¥–∞–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Apify Documentation](https://docs.apify.com)
- [Apify Store](https://apify.com/store)
- [Crawlee Documentation](https://crawlee.dev)
- [Apify SDK for JavaScript](https://sdk.apify.com)

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–∫—Ç–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω API
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–∫—Ç–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Apify Console

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–∞—Ä—Å—è—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ –∫–æ–¥–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∞–π—Ç –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω—ã –ª–∏–º–∏—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Apify

